{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/esnext.json.parse.js\";\nimport { ref, computed, onMounted, getCurrentInstance } from 'vue';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nimport { Delete, Check } from '@element-plus/icons-vue';\nexport default {\n  __name: 'CartPage',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const {\n      proxy\n    } = getCurrentInstance();\n    const loading = ref(false);\n    const cartList = ref([]);\n    const selection = ref([]); // 存储被选中的购物车ID\n    const currentUser = ref('');\n\n    // 获取用户信息\n    const getUser = () => {\n      const userStr = localStorage.getItem('user');\n      if (userStr) {\n        const u = JSON.parse(userStr);\n        currentUser.value = u.username;\n        fetchCart();\n      }\n    };\n\n    // 获取购物车数据\n    const fetchCart = async () => {\n      if (!currentUser.value) return;\n      loading.value = true;\n      try {\n        const res = await proxy.$request.get('/cart/list', {\n          params: {\n            username: currentUser.value\n          }\n        });\n        if (res.data.code === '200') {\n          cartList.value = res.data.data;\n        }\n      } catch (e) {\n        ElMessage.error('加载购物车失败');\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    // 计算总价\n    const totalPrice = computed(() => {\n      let total = 0;\n      cartList.value.forEach(item => {\n        if (selection.value.includes(item.id)) {\n          total += item.product.price * item.quantity;\n        }\n      });\n      return total;\n    });\n\n    // 全选状态\n    const isAllSelected = computed(() => {\n      return cartList.value.length > 0 && selection.value.length === cartList.value.length;\n    });\n\n    // 切换单选\n    const toggleSelect = id => {\n      const idx = selection.value.indexOf(id);\n      if (idx > -1) {\n        selection.value.splice(idx, 1);\n      } else {\n        selection.value.push(id);\n      }\n    };\n\n    // 切换全选\n    const toggleSelectAll = () => {\n      if (isAllSelected.value) {\n        selection.value = [];\n      } else {\n        selection.value = cartList.value.map(item => item.id);\n      }\n    };\n\n    // 修改数量\n    const changeQty = async (item, delta) => {\n      const newQty = item.quantity + delta;\n      if (newQty < 1) return;\n      try {\n        await proxy.$request.post('/cart/update', {\n          id: item.id,\n          quantity: newQty\n        });\n        item.quantity = newQty; // 前端更新\n      } catch (e) {\n        ElMessage.error('更新失败');\n      }\n    };\n\n    // 删除商品\n    const deleteItem = id => {\n      ElMessageBox.confirm('确定要移除该商品吗?', '提示', {\n        confirmButtonText: '移除',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        try {\n          await proxy.$request.delete(`/cart/delete/${id}`);\n          ElMessage.success('已移除');\n          // 从列表中移除\n          cartList.value = cartList.value.filter(item => item.id !== id);\n          // 从选中状态移除\n          const idx = selection.value.indexOf(id);\n          if (idx > -1) selection.value.splice(idx, 1);\n        } catch (e) {\n          ElMessage.error('删除失败');\n        }\n      });\n    };\n\n    // 结算\n    const handleCheckout = () => {\n      if (selection.value.length === 0) return;\n      ElMessage.success(`结算成功！共支付 ¥${totalPrice.value.toFixed(2)}`);\n      // 这里可以扩展为跳转订单确认页逻辑\n    };\n\n    // 辅助：图片背景\n    const getBg = product => {\n      if (product && product.imageUrl) {\n        return {\n          backgroundImage: `url(${product.imageUrl})`,\n          backgroundSize: 'cover'\n        };\n      }\n      return {\n        backgroundColor: '#FAD02C'\n      };\n    };\n    onMounted(() => {\n      getUser();\n    });\n    const __returned__ = {\n      proxy,\n      loading,\n      cartList,\n      selection,\n      currentUser,\n      getUser,\n      fetchCart,\n      totalPrice,\n      isAllSelected,\n      toggleSelect,\n      toggleSelectAll,\n      changeQty,\n      deleteItem,\n      handleCheckout,\n      getBg,\n      ref,\n      computed,\n      onMounted,\n      getCurrentInstance,\n      get ElMessage() {\n        return ElMessage;\n      },\n      get ElMessageBox() {\n        return ElMessageBox;\n      },\n      get Delete() {\n        return Delete;\n      },\n      get Check() {\n        return Check;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","getCurrentInstance","ElMessage","ElMessageBox","Delete","Check","proxy","loading","cartList","selection","currentUser","getUser","userStr","localStorage","getItem","u","JSON","parse","value","username","fetchCart","res","$request","get","params","data","code","e","error","totalPrice","total","forEach","item","includes","id","product","price","quantity","isAllSelected","length","toggleSelect","idx","indexOf","splice","push","toggleSelectAll","map","changeQty","delta","newQty","post","deleteItem","confirm","confirmButtonText","cancelButtonText","type","then","delete","success","filter","handleCheckout","toFixed","getBg","imageUrl","backgroundImage","backgroundSize","backgroundColor"],"sources":["E:/xianyu/tnt/tnt_shopping_front/src/components/CartPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"cart-wrapper\">\r\n    <!-- 头部标题 -->\r\n    <div class=\"cart-header\">\r\n      <h2>MY SHOPPING CART</h2>\r\n      <span class=\"count-badge\">{{ cartList.length }} ITEMS</span>\r\n    </div>\r\n\r\n    <!-- 购物车列表 -->\r\n    <div class=\"cart-list\" v-loading=\"loading\">\r\n\r\n      <!-- 空状态 -->\r\n      <div v-if=\"!loading && cartList.length === 0\" class=\"empty-cart\">\r\n        <div class=\"empty-text\">YOUR CART IS EMPTY</div>\r\n        <div class=\"empty-sub\">购物车空空如也，快去选购吧</div>\r\n      </div>\r\n\r\n      <!-- 商品行 -->\r\n      <div\r\n          class=\"cart-item\"\r\n          v-for=\"(item) in cartList\"\r\n          :key=\"item.id\"\r\n          :class=\"{ 'selected': selection.includes(item.id) }\"\r\n      >\r\n        <!-- 1. 勾选框 -->\r\n        <div class=\"checkbox-area\" @click=\"toggleSelect(item.id)\">\r\n          <div class=\"custom-checkbox\" :class=\"{ checked: selection.includes(item.id) }\">\r\n            <el-icon v-if=\"selection.includes(item.id)\"><Check /></el-icon>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 2. 商品图 -->\r\n        <div class=\"product-img\" :style=\"getBg(item.product)\">\r\n          <span v-if=\"!item.product?.imageUrl\" class=\"no-img\">TNT</span>\r\n        </div>\r\n\r\n        <!-- 3. 商品信息 -->\r\n        <div class=\"product-info\">\r\n          <div class=\"p-name\">{{ item.product?.name }}</div>\r\n          <div class=\"p-sku\">规格: 默认</div>\r\n          <div class=\"p-price\">¥ {{ item.product?.price }}</div>\r\n        </div>\r\n\r\n        <div class=\"product-info\">\r\n          <div class=\"p-sku\">规格: 默认</div>\r\n        </div>\r\n\r\n        <!-- 4. 数量控制 -->\r\n        <div class=\"quantity-ctrl\">\r\n          <button class=\"qty-btn\" @click=\"changeQty(item, -1)\" :disabled=\"item.quantity <= 1\">-</button>\r\n          <input type=\"text\" class=\"qty-input\" v-model=\"item.quantity\" readonly />\r\n          <button class=\"qty-btn\" @click=\"changeQty(item, 1)\">+</button>\r\n        </div>\r\n\r\n        <!-- 5. 删除按钮 -->\r\n        <div class=\"delete-btn\" @click=\"deleteItem(item.id)\">\r\n          <el-icon><Delete /></el-icon>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 底部结算栏 (吸底) -->\r\n    <div class=\"checkout-bar\">\r\n      <div class=\"bar-left\" @click=\"toggleSelectAll\">\r\n        <div class=\"custom-checkbox\" :class=\"{ checked: isAllSelected && cartList.length > 0 }\">\r\n          <el-icon v-if=\"isAllSelected && cartList.length > 0\"><Check /></el-icon>\r\n        </div>\r\n        <span class=\"select-all-text\">SELECT ALL</span>\r\n      </div>\r\n\r\n      <div class=\"bar-right\">\r\n        <div class=\"total-info\">\r\n          <div class=\"total-label\">TOTAL AMOUNT</div>\r\n          <div class=\"total-price\">\r\n            <span class=\"symbol\">¥</span>\r\n            {{ totalPrice.toFixed(2) }}\r\n          </div>\r\n        </div>\r\n        <button class=\"checkout-btn\" @click=\"handleCheckout\" :disabled=\"selection.length === 0\">\r\n          CHECKOUT ({{ selection.length }})\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, getCurrentInstance } from 'vue'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport { Delete, Check } from '@element-plus/icons-vue'\r\n\r\nconst { proxy } = getCurrentInstance()\r\n\r\nconst loading = ref(false)\r\nconst cartList = ref([])\r\nconst selection = ref([]) // 存储被选中的购物车ID\r\nconst currentUser = ref('')\r\n\r\n// 获取用户信息\r\nconst getUser = () => {\r\n  const userStr = localStorage.getItem('user')\r\n  if (userStr) {\r\n    const u = JSON.parse(userStr)\r\n    currentUser.value = u.username\r\n    fetchCart()\r\n  }\r\n}\r\n\r\n// 获取购物车数据\r\nconst fetchCart = async () => {\r\n  if (!currentUser.value) return\r\n  loading.value = true\r\n  try {\r\n    const res = await proxy.$request.get('/cart/list', {\r\n      params: { username: currentUser.value }\r\n    })\r\n    if (res.data.code === '200') {\r\n      cartList.value = res.data.data\r\n    }\r\n  } catch (e) {\r\n    ElMessage.error('加载购物车失败')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// 计算总价\r\nconst totalPrice = computed(() => {\r\n  let total = 0\r\n  cartList.value.forEach(item => {\r\n    if (selection.value.includes(item.id)) {\r\n      total += item.product.price * item.quantity\r\n    }\r\n  })\r\n  return total\r\n})\r\n\r\n// 全选状态\r\nconst isAllSelected = computed(() => {\r\n  return cartList.value.length > 0 && selection.value.length === cartList.value.length\r\n})\r\n\r\n// 切换单选\r\nconst toggleSelect = (id) => {\r\n  const idx = selection.value.indexOf(id)\r\n  if (idx > -1) {\r\n    selection.value.splice(idx, 1)\r\n  } else {\r\n    selection.value.push(id)\r\n  }\r\n}\r\n\r\n// 切换全选\r\nconst toggleSelectAll = () => {\r\n  if (isAllSelected.value) {\r\n    selection.value = []\r\n  } else {\r\n    selection.value = cartList.value.map(item => item.id)\r\n  }\r\n}\r\n\r\n// 修改数量\r\nconst changeQty = async (item, delta) => {\r\n  const newQty = item.quantity + delta\r\n  if (newQty < 1) return\r\n\r\n  try {\r\n    await proxy.$request.post('/cart/update', {\r\n      id: item.id,\r\n      quantity: newQty\r\n    })\r\n    item.quantity = newQty // 前端更新\r\n  } catch (e) {\r\n    ElMessage.error('更新失败')\r\n  }\r\n}\r\n\r\n// 删除商品\r\nconst deleteItem = (id) => {\r\n  ElMessageBox.confirm('确定要移除该商品吗?', '提示', {\r\n    confirmButtonText: '移除',\r\n    cancelButtonText: '取消',\r\n    type: 'warning'\r\n  }).then(async () => {\r\n    try {\r\n      await proxy.$request.delete(`/cart/delete/${id}`)\r\n      ElMessage.success('已移除')\r\n      // 从列表中移除\r\n      cartList.value = cartList.value.filter(item => item.id !== id)\r\n      // 从选中状态移除\r\n      const idx = selection.value.indexOf(id)\r\n      if (idx > -1) selection.value.splice(idx, 1)\r\n    } catch (e) {\r\n      ElMessage.error('删除失败')\r\n    }\r\n  })\r\n}\r\n\r\n// 结算\r\nconst handleCheckout = () => {\r\n  if (selection.value.length === 0) return\r\n  ElMessage.success(`结算成功！共支付 ¥${totalPrice.value.toFixed(2)}`)\r\n  // 这里可以扩展为跳转订单确认页逻辑\r\n}\r\n\r\n// 辅助：图片背景\r\nconst getBg = (product) => {\r\n  if (product && product.imageUrl) {\r\n    return { backgroundImage: `url(${product.imageUrl})`, backgroundSize: 'cover' }\r\n  }\r\n  return { backgroundColor: '#FAD02C' }\r\n}\r\n\r\nonMounted(() => {\r\n  getUser()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n@import url('https://fonts.googleapis.com/css2?family=Anton&family=Roboto:wght@400;700;900&display=swap');\r\n\r\n.cart-wrapper {\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n  min-height: 600px;\r\n  padding-bottom: 100px; /* 留出底部结算栏空间 */\r\n}\r\n\r\n/* 头部 */\r\n.cart-header {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 15px;\r\n  margin-bottom: 30px;\r\n  border-bottom: 4px solid #000;\r\n  padding-bottom: 15px;\r\n}\r\n\r\n.cart-header h2 {\r\n  font-family: 'Anton', sans-serif;\r\n  font-size: 36px;\r\n  margin: 0;\r\n  letter-spacing: 1px;\r\n}\r\n\r\n.count-badge {\r\n  background: #FAD02C;\r\n  color: #000;\r\n  font-weight: bold;\r\n  padding: 2px 8px;\r\n  font-size: 14px;\r\n  border: 2px solid #000;\r\n}\r\n\r\n/* 列表 */\r\n.cart-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 15px;\r\n}\r\n\r\n.empty-cart {\r\n  text-align: center;\r\n  padding: 80px 0;\r\n  color: #999;\r\n}\r\n\r\n.empty-text {\r\n  font-family: 'Anton', sans-serif;\r\n  font-size: 32px;\r\n  color: #DDD;\r\n}\r\n\r\n/* 单行商品 */\r\n.cart-item {\r\n  display: flex;\r\n  align-items: center;\r\n  background: #FFF;\r\n  border: 2px solid #DDD;\r\n  padding: 15px;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.cart-item.selected {\r\n  border-color: #000;\r\n  background: #FFFCF0;\r\n  box-shadow: 4px 4px 0 rgba(0,0,0,0.1);\r\n}\r\n\r\n/* 勾选框区域 */\r\n.checkbox-area {\r\n  margin-right: 20px;\r\n  cursor: pointer;\r\n}\r\n\r\n.custom-checkbox {\r\n  width: 24px;\r\n  height: 24px;\r\n  border: 2px solid #000;\r\n  background: #FFF;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 16px;\r\n  color: #000;\r\n}\r\n\r\n.custom-checkbox.checked {\r\n  background: #FAD02C;\r\n}\r\n\r\n/* 图片 */\r\n.product-img {\r\n  width: 80px;\r\n  height: 80px;\r\n  background-color: #FAD02C;\r\n  border: 2px solid #000;\r\n  margin-right: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  overflow: hidden;\r\n}\r\n\r\n.no-img {\r\n  font-family: 'Anton', sans-serif;\r\n  font-size: 20px;\r\n  color: rgba(0,0,0,0.1);\r\n  transform: rotate(-15deg);\r\n}\r\n\r\n/* 信息 */\r\n.product-info {\r\n  flex: 1;\r\n}\r\n\r\n.p-name {\r\n  font-weight: 900;\r\n  font-size: 16px;\r\n  color: #000;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.p-sku {\r\n  font-size: 12px;\r\n  color: #888;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.p-price {\r\n  font-family: 'Anton', sans-serif;\r\n  font-size: 20px;\r\n  color: #000;\r\n}\r\n\r\n/* 数量控制 */\r\n.quantity-ctrl {\r\n  display: flex;\r\n  border: 2px solid #000;\r\n  margin-right: 30px;\r\n}\r\n\r\n.qty-btn {\r\n  width: 30px;\r\n  height: 30px;\r\n  background: #000;\r\n  color: #FAD02C;\r\n  border: none;\r\n  font-weight: bold;\r\n  font-size: 18px;\r\n  cursor: pointer;\r\n}\r\n\r\n.qty-btn:disabled {\r\n  background: #555;\r\n  color: #888;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.qty-input {\r\n  width: 40px;\r\n  border: none;\r\n  text-align: center;\r\n  font-weight: bold;\r\n  font-size: 14px;\r\n  outline: none;\r\n}\r\n\r\n/* 删除按钮 */\r\n.delete-btn {\r\n  font-size: 20px;\r\n  color: #999;\r\n  cursor: pointer;\r\n  padding: 5px;\r\n  transition: color 0.2s;\r\n}\r\n\r\n.delete-btn:hover {\r\n  color: #F44336;\r\n}\r\n\r\n/* 底部结算栏 */\r\n.checkout-bar {\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 80px;\r\n  background: #FFF;\r\n  border-top: 4px solid #000;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0 40px;\r\n  z-index: 999;\r\n  box-shadow: 0 -4px 20px rgba(0,0,0,0.05);\r\n}\r\n\r\n.bar-left {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  cursor: pointer;\r\n  font-weight: bold;\r\n}\r\n\r\n.select-all-text {\r\n  font-family: 'Anton', sans-serif;\r\n  font-size: 18px;\r\n  letter-spacing: 1px;\r\n}\r\n\r\n.bar-right {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 30px;\r\n}\r\n\r\n.total-info {\r\n  text-align: right;\r\n}\r\n\r\n.total-label {\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n  color: #888;\r\n}\r\n\r\n.total-price {\r\n  font-family: 'Anton', sans-serif;\r\n  font-size: 32px;\r\n  color: #000;\r\n  line-height: 1;\r\n}\r\n\r\n.symbol {\r\n  font-size: 20px;\r\n}\r\n\r\n.checkout-btn {\r\n  height: 50px;\r\n  padding: 0 40px;\r\n  background: #000;\r\n  color: #FAD02C;\r\n  font-family: 'Anton', sans-serif;\r\n  font-size: 20px;\r\n  letter-spacing: 2px;\r\n  border: none;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.checkout-btn:hover:not(:disabled) {\r\n  background: #FAD02C;\r\n  color: #000;\r\n}\r\n\r\n.checkout-btn:disabled {\r\n  background: #CCC;\r\n  color: #FFF;\r\n  cursor: not-allowed;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}